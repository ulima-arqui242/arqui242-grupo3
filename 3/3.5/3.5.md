# 3.5. Elección de Tecnología

Sample content for section 3.5.

## EDT para el módulo de Analíticas y Reporte

### Contexto
El módulo de analíticas y reporte, está diseñado para otorgar una visión amplia del rendimiento de cada salón de belleza en la plataforma InStudio, enfocado en aquellos bien o medianamente establecidos en el mercado. Las funcionalidades de este módulo están disponibles mediante la adquisición del plan organizativo. Este módulo se encarga de recopilar y almacenar métricas y datos que muestren el rendimiento de un salón, como cantidad reservas, reservas canceladas, entre otros, serán disponibles mediante un dashboard. Además de posibilitar la opción de generar reportes para un análisis más exhaustivo. El sistema manejará un gran volumen de datos en tiempo real por lo que se debe asegurar un alto rendimiento.

### 1) Titulo: Computación de métricas
Es necesario implementar un servicio que realice el cómputo de la función encargada de obtener y almacenar las métricas que se mostrarán en el dashboard del cliente. Por esta razón, se busca seleccionar opciones que permitan la ejecución de funciones bajo demanda, facilitando la escalabilidad y optimizando los costos.

#### Alternativas
#### 1.1 Stored Procedure en PostgreSQL - RDS
- **Ventajas**:
  - Eficiencia en procesamiento de datos: se ejecuta directamente en la base de datos, optimizando el rendimiento y minimizando latencia.
  - Mantenimiento centralizado: Facilita la gestión de la lógica y evita tener que desplegar nuevos servicios.

 - **Desventajas**:
   - Dependencia del sistema de base de datos: Todo el procesamiento se realiza en la base de datos, lo que puede crear cuellos de botella.
   - Complejidad de gestión: a medida que la lógica de negocio crece, la lógica del stored procedure tiene que ser actualizada.

#### 1.2 AWS Lambda
- **Ventajas**:
  - Escalabilidad automática: Se ajusta automáticamente la capacidad para manejar grandes volúmenes de solicitudes.
  - Integración nativa con otros servicios de AWS: Facilita la interacción con servicios como AWS RDS (base de datos) y Amazon API Gateway, los cuales serán utilizados en otros módulos del sistema.
  - Costo por ejecución: Solo se paga por el tiempo que las funciones están activas, lo que reduce significativamente los costos operativos.
  - Manejo de grandes volúmenes de datos: AWS Lambda es capaz de procesar una alta carga de trabajo sin comprometer el rendimiento.

- **Desventajas**:
  - Límite de tiempo de ejecución: Cada invocación de Lambda tiene un límite de 15 minutos.

#### 1.3 Azure Functions

- **Ventajas**:
  - Buena integración con servicios de Microsoft.
  - Escalabilidad y pago por uso: escala automáticamente y cobra solo por el uso, lo que permite controlar los costos operativos.
  - Variedad de opciones de alojamiento: Azure Functions ofrece diferentes planes de consumo y opciones de alojamiento para satisfacer diversas necesidades de rendimiento.

- **Desventajas**:
  - Menor comunidad y recursos que AWS: AWS Lambda tiene una comunidad más grande y más recursos documentados que Azure Functions, lo que puede ser una barrera para la resolución rápida de problemas.
  - Integración no tan directa con AWS: Dado que ya se ha decidido trabajar con servicios de AWS, la integración de Azure Functions podría ser más compleja y menos eficiente.

#### Criterios de Elección
- Costo
- Requerimientos del negocio
- Escalabilidad
- Facilidad de integración
- Pruebas

#### Decisión
Se elige stored procedure en PostgreSQL - RDS.

#### Sustento
Debido a la facilidad para realizar pruebas, el uso de otros servicios de AWS en otros módulos y el límite de quince minutos de ejecución de AWS Lambda, se ha decidido que la lógica para generar las métricas será realizada en un stored procedure dentro de la base de datos de RDS.

### 2) Titulo: Cron Job
Para ejecutar la función encargada de computar las métricas diariamente, es necesario implementar un job que automatice el proceso. Este job debe ejecutarse de manera programada sin intervención manual, asegurando que el sistema esté siempre actualizado.

#### Alternativas
#### 2.1 Servidor local
- **Ventajas**:
  - Control total sobre el entorno: Al usar un servidor local, se tiene control completo sobre la configuración del servidor y los recursos que se asignan al job.
  - Sin costos por uso de servicios en la nube: No se incurre en costos adicionales derivados de servicios en la nube, ya que el trabajo se ejecuta en infraestructura propia.

 - **Desventajas**:
   - Mantenimiento manual: Se requiere que el equipo de TI administre, actualice y mantenga el servidor, lo que implica costos de personal y tiempo.
   - Escalabilidad limitada: Los servidores locales pueden tener problemas para escalar si la cantidad de datos o la frecuencia del job crece rápidamente.
   - Disponibilidad y fallos: La infraestructura local puede estar sujeta a caídas de red, energía o hardware, lo que impactaría en la fiabilidad del job.
#### 2.2 Amazon EventBridge + AWS Lambda
- **Ventajas**:
  - Escalabilidad automática.
  - Integración directa con servicios de Amazon.
  - Manejo de eventos cron y flexibilidad de programación.
  - Modelo de costos por uso: Solo se paga por los eventos procesados.

- **Desventajas**:
  - Dependencia de la infraestructura en la nube.

#### Criterios de Elección
- Costo
- Requerimientos del negocio
- Escalabilidad
- Facilidad de integración

#### Decisión
Se elige Amazon EventBridge + AWS Lambda.

#### Sustento
Amazon EventBridge fue seleccionada por la facilidad de integración con AWS Lambda y así ejecutar el Stored procedure encargado de computar las métricas. Además, posee su modelo de costos por uso y su escalabilidad automática .